{% extends 'base.html' %}

{% block content %}
<div style="margin-bottom: 30px;">
    <a href="{{ url_for('index') }}" style="color: var(--accent); text-decoration: none; font-size: 14px;">‚Üê Back to Home</a>
</div>

<section style="margin-bottom: 40px;">
    <div style="background: var(--bg-alt); border: 1px solid var(--border); border-radius: var(--radius); padding: 30px;">
        <h1 style="font-size: 32px; margin: 0 0 10px 0;">{{ training.name }}</h1>
        {% if training.description %}
        <p style="color: var(--text-light); margin: 0; line-height: 1.6;">{{ training.description }}</p>
        {% endif %}
</div>
</section>

<!-- Phase Navigation -->
<nav style="position: sticky; top: 0; z-index: 50; background: var(--bg); border-bottom: 1px solid var(--border); margin-bottom: 30px; padding: 15px 0;">
    <div style="display: flex; gap: 10px; overflow-x: auto; padding: 0 5px;">
        {% for phase in phases.keys() %}
        <a href="#phase-{{ loop.index }}" 
           style="padding: 8px 16px; background: var(--bg-alt); border: 1px solid var(--border); border-radius: 6px; color: var(--text); text-decoration: none; white-space: nowrap; font-size: 13px; transition: all 0.2s ease;"
           onmouseover="this.style.borderColor='var(--accent)'; this.style.color='var(--accent)';"
           onmouseout="this.style.borderColor='var(--border)'; this.style.color='var(--text)';">
            {{ phase }}
        </a>
        {% endfor %}
    </div>
</nav>

<section>
    <h2 style="font-size: 20px; margin-bottom: 20px; color: var(--text);">Topics & Lessons</h2>
    
    {% for phase, topics in phases.items() %}
    <div id="phase-{{ loop.index }}" style="margin-bottom: 40px; scroll-margin-top: 80px;">
        <h3 style="font-size: 18px; margin-bottom: 15px; color: var(--accent); border-bottom: 1px solid var(--border); padding-bottom: 8px;">
            {{ phase }}
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px;">
            {% for topic in topics %}
            <a href="{{ url_for('topic_detail', topic_id=topic.id) }}" style="text-decoration: none; color: inherit;">
                <article class="track" style="height: 100%; transition: transform 0.2s ease, border-color 0.2s ease;">
                    <h3 class="track-title" style="font-size: 18px; margin: 0 0 10px 0;">{{ topic.name }}</h3>
                    
                    <div class="track-meta" style="margin-top: auto;">
                        {% if topic.instructor %}
                        <span>{{ topic.instructor }}</span>
                        {% endif %}
                        {% if topic.video_url %}
                        <span style="color: var(--accent);">üìπ Video</span>
                        {% endif %}
                    </div>
                </article>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</section>
{% endblock %}
